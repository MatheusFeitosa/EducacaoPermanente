def cadastrar_turma(self,variavel_turma_id_user, variavel_codigo, variavel_curso):
        try:
            with sqlite3.connect('db1.db') as connection:
                cursor = connection.cursor()
                cursor.execute('INSERT INTO turma(turma_id_user, codigo, curso) VALUES(?, ?, ?)', (variavel_turma_id_user, variavel_codigo, variavel_curso))
                connection.commit()
                return True
        except:
            return False


def cadastrar_horario(self,variavel_horario_id_turma, variavel_dia_da_semana, variavel_horario_inicio, variavel_horario_termino):
        try:
            with sqlite3.connect('db1.db') as connection:
                cursor = connection.cursor()
                cursor.execute('INSERT INTO horario(horario_id_turma, dia_da_semana, horario_inicio, horario_termino) VALUES(?, ?, ?, ?)', (variavel_horario_id_turma, variavel_dia_da_semana, variavel_horario_inicio, variavel_horario_termino))
                connection.commit()
                return True
        except:
            return False



def cadastrar_alunos(self,variavel_alunos_id_turma, variavel_alunos_id_user, variavel_presenca):
        try:
            with sqlite3.connect('db1.db') as connection:
                cursor = connection.cursor()
                cursor.execute('INSERT INTO alunos(alunos_id_turma, alunos_id_user, presenca) VALUES(?, ?, ?)', (variavel_alunos_id_turma, variavel_alunos_id_user, variavel_presenca))
                connection.commit()
                return True
        except:
            return False


def listarTurma(self):

        with sqlite3.connect('db1.db') as connection:

            cursor = connection.cursor()

            lista = ("SELECT * FROM turma")
            result = cursor.execute(lista).fetchall()
            
        return result
      

def listarHorario(self, variavel_horario_id_turma):

        with sqlite3.connect('db1.db') as connection:

            cursor = connection.cursor()

            lista = ("SELECT * FROM horario WHERE horario_id_turma = variavel_horario_id_turma")
            result = cursor.execute(lista).fetchall()
            
        return result
      

def listarAlunos(self, variavel_alunos_id_turma, variavel_alunos_id_user):

        with sqlite3.connect('db1.db') as connection:

            cursor = connection.cursor()

            lista = ("SELECT * FROM alunos WHERE alunos_id_turma = variavel_alunos_id_turma AND alunos_id_user = variavel_alunos_id_user")
            result = cursor.execute(lista).fetchall()
            
        return result

def buscar_professor(self, usr):
        with sqlite3.connect('db1.db') as connection:
            cursor = connection.cursor()
            find_prof = ("SELECT id FROM user WHERE usuario = ?")
            results = cursor.execute(find_prof, (usr)).fetchall()
        return results

@app.route("/cadastroturma")
def cadastro():
    return render_template('CadastroTurma.html')

@app.route("/cadastrarturma", methods = ['POST'])
def cadastrar():
    variavel_turma_id_user = str(request.form["professor"]).title()
    variavel_codigo = str(request.form["codigo da turma"]).title()
    variavel_curso = str(request.form["curso"])
    
    banco = Banco()
    if (banco.buscar_professor(usr) == []):
        return 'Usuario n√£o existe'
    else:
	variavel_turma_id_user = banco.buscar_professor(usr)
	cadastrado = banco.cadastrar_turma(variavel_turma_id_user[0], variavel_codigo, variavel_curso)
    if cadastrado:
        return render_template('cadastro.html', erro_cad = True)
    else:
        return render_template('cadastro.html', erro_cad = True)

      
